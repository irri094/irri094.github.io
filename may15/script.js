start_time = JSON.parse('1675306800.0')
problems = JSON.parse('["A", "B", "C", "D", "E", "F", "G", "H", "I", "J"]')
results = JSON.parse('{"DU_NotStrongEnough University of Dhaka": [[108, 0], [29, 0], null, [16, 0], null, [205, 0], [36, 0], [92, 0], [57, 0], [142, 0]], "Three of a Kind Indian Institute of Technology – Madras": [[61, 0], [94, 1], null, [16, 0], null, [163, 0], [22, 0], [245, 0], [50, 0], [141, 0]], "BUET Potatoes Bangladesh University of Engineering and Technology": [[69, 0], [125, 1], null, [42, 2], [42, 2], [263, 1], [11, 0], [96, 0], [54, 0], [208, 1]], "FLogic International Institute of Information Technology – Hyderabad": [[112, 1], [46, 0], null, [21, 0], null, [272, 3], [43, 0], [196, 0], [70, 1], [181, 1]], "RUET_Aftermath Rajshahi University of Engineering & Technology": [[162, 0], [72, 2], null, [14, 0], null, [267, 0], [24, 0], [284, 0], [101, 0], [130, 0]], "Kaala Khatta Indian Institute of Technology – Roorkee": [[89, 0], [160, 2], null, [11, 0], null, [187, 1], [31, 0], [245, 0], [141, 0], [241, 0]], "seize_means_of_software_production Birla Institute of Technology and Science, Pilani Campus": [[119, 1], [65, 3], null, [14, 0], [14, 0], [148, 0], [27, 0], null, [74, 0], [198, 0]], "AlphaZer0 IIT Bhubaneswar": [[123, 1], [94, 1], null, [15, 1], null, [161, 1], [18, 0], [194, 1], [72, 0], null], "strawberryparfait Indian Institute of Technology – Madras": [[95, 0], [134, 2], null, [29, 0], [29, 0], [207, 0], [12, 0], [161, 2], [139, 0], null], "rng(weed) Indian Institute of Technology – Varanasi": [[92, 0], [134, 3], null, [12, 0], null, [12, 0], [31, 0], [128, 1], [157, 0], [243, 0]], "Convex Chull Indian Institute of Technology (ISM), Dhanbad": [[179, 3], [82, 0], null, [28, 0], null, [256, 0], [18, 0], [227, 0], [64, 0], [64, 0]], "Triumvirate73 Indian Institute of Technology – Patna": [[228, 1], [48, 0], null, [29, 1], null, [278, 0], [17, 0], null, [169, 0], [118, 0]], "2Golu1Tonu National Institute of Technology, Trichy": [[189, 2], [93, 1], null, [33, 0], null, [33, 0], [42, 0], [204, 2], [155, 0], [256, 4]], "PGP IIIT-Delhi": [[204, 4], [138, 2], null, [16, 0], null, [285, 2], [21, 1], null, [121, 0], [221, 0]], "AuditFail Indian Institute of Technology – Delhi": [[260, 7], [131, 2], null, [24, 1], null, [292, 1], [38, 0], [38, 0], [109, 0], [175, 0]], "PalindORme BITS-Pilani, Hyderabad Campus": [[114, 0], [39, 0], null, [13, 1], null, [269, 1], [20, 0], [20, 0], [74, 0], [74, 0]], "JU_kzvd4729 Jahangirnagar University": [[74, 0], [65, 2], null, [19, 0], null, [19, 0], [28, 0], [172, 2], [102, 0], [284, 0]], "dpbois Indian Institute of Technology – Roorkee": [[153, 1], [187, 1], null, [22, 0], null, [258, 0], [29, 0], null, [94, 0], null], "SIMLEX_BruteForce Indian Institute of Technology – Kanpur": [[215, 4], [46, 0], null, [33, 2], null, null, [29, 0], null, [109, 0], [290, 0]], "AIUB_Captured American International University – Bangladesh": [[136, 0], [82, 0], null, [35, 1], null, null, [29, 0], null, [243, 2], [294, 2]], "ladaiLadai International Institute of Information Technology – Hyderabad": [[202, 0], [168, 2], null, [30, 2], null, [226, 0], [48, 0], null, [144, 3], [144, 3]], "Another_unknown_team Indian Institute of Information Technology Pune": [[221, 3], [133, 0], null, [22, 0], null, null, [28, 0], [28, 0], [196, 0], [263, 2]], "Khauff Indian Institute of Technology – Delhi": [[162, 0], [104, 2], null, [23, 0], null, [255, 0], [131, 3], null, [182, 1], null], "Seirin Sri Sivasubramaniya Nadar College of Engineering": [[105, 1], [69, 0], null, [8, 0], null, null, [18, 0], null, [146, 0], [146, 0]], "CUET_Sapphire Chittagong University of Engineering & Technology": [[146, 0], [56, 0], null, [16, 0], null, null, [22, 0], null, [116, 0], [245, 2]], "Ujjwal ke bharose Indian Institute of Technology – Mandi": [[203, 0], [86, 0], null, [41, 0], null, null, [50, 0], null, [148, 1], [148, 1]], "PastGlory PDPM Indian Institute of Information Technology Design & Manufacturing, Jabalpur": [null, [95, 2], null, [23, 0], null, null, [33, 0], [233, 1], [141, 0], [141, 0]], "KUET_Effervescent Khulna University of Engineering & Technology": [[222, 2], [131, 2], null, [12, 0], null, [12, 0], [23, 0], null, [187, 0], [187, 0]], "SUST_Carnage Shahjalal University of Science and Technology": [[194, 1], [102, 1], null, [17, 0], null, [250, 1], [38, 0], null, [38, 0], [38, 0]], "Runtime Terrors Indian Institute of Technology – Bombay": [[184, 1], [165, 0], null, [37, 0], null, null, [57, 1], null, null, [264, 0]], "Paradigm Shift Indian Institute of Technology – Indore": [[202, 4], [189, 3], null, [29, 0], null, null, [53, 0], null, [194, 1], null], "Pratyahara Indian Institute Of Technology Jodhpur": [[248, 0], [168, 2], null, [23, 0], null, null, [29, 0], null, [294, 2], null], "RuntimeEXception Punjab Engineering College Chandigarh": [[294, 2], [93, 0], null, [21, 0], null, null, [30, 0], null, [30, 0], [53, 1]], "Tree Idiots Institute of Engineering and Technology – Devi Ahilya Univ.": [[53, 1], [68, 0], null, [23, 0], null, [23, 0], [32, 0], null, [155, 0], null], "RU_404 University of Rajshahi": [[155, 0], [102, 0], null, [27, 0], null, [156, 0], [37, 0], null, null, [37, 0]], "Kobi Kende Fellen Academy of Technology, Hooghly": [[37, 0], [93, 0], null, [14, 0], null, null, [29, 1], null, [216, 0], null], "Team_Robust University of Barisal": [[246, 2], [60, 1], null, [15, 0], null, null, [25, 0], null, [25, 0], null], "JnU-The_Last_Phase Jagannath University, Bangladesh": [[25, 0], [67, 0], null, [38, 0], null, null, [30, 0], null, [30, 0], [252, 1]], "HSTU_TREENITY Hajee Mohammad Danesh Science and Technology University": [null, [148, 1], null, [15, 0], null, null, [26, 0], null, [270, 1], null], "AlgoManiaX BITS-Pilani, Goa Campus": [[270, 1], [98, 2], null, [20, 0], null, null, [36, 0], null, [288, 1], null], "Dunno Indian Institute of Technology – Delhi": [[216, 2], [182, 3], null, [21, 0], null, null, [12, 0], null, [12, 0], null], "IUT_Reversehash Islamic University of Technology": [[12, 0], [184, 1], null, [41, 3], null, null, [62, 2], null, [258, 1], null], "Team Blast Indian Institute of Information Technology,Una": [[258, 1], [101, 0], null, [30, 0], null, null, [47, 0], null, [47, 0], null], "respawn Delhi Technological University(Formerly DCE)": [null, [151, 1], null, [9, 0], null, null, [20, 0], null, [20, 0], null], "AUST_Onslaught Ahsanullah University of Science and Technology": [[20, 0], [167, 2], null, [24, 0], null, null, [14, 0], null, [14, 0], null], "CoU_Unpredictable_3207 Comilla University": [[14, 0], [161, 2], null, [22, 0], null, null, [38, 0], null, [38, 0], null], "MBSTU_Durbeen Mawlana Bhashani Science & Technology University": [[38, 0], [167, 2], null, [23, 0], null, null, [53, 1], null, [53, 1], null], "Pentateuch Ghulam Ishaq Khan Institute of Engineering Sciences and Technology": [[53, 1], [158, 2], null, [42, 0], null, null, [25, 2], null, null, null], "BSMRSTU_DreamsOfSuccess Bangabandhu Sheikh Mujibur Rahman Science and Technology University": [null, [184, 3], null, [56, 0], null, null, [31, 0], null, [31, 0], null], "Trojans 1 NU-FAST Karachi": [[31, 0], [126, 0], null, [82, 3], null, null, [72, 0], null, null, null], "Zero^Infinity Dhaka University of Engineering & Technology – Gazipur": [null, [247, 1], null, [26, 0], null, null, [51, 0], null, null, null], "IST_neverGiveUp Institute of Science and Technology": [[51, 0], [184, 5], null, [21, 0], null, null, [78, 1], null, [78, 1], null], "PSTU_Renaissance Patuakhali Science and Technology University": [null, [255, 5], null, [10, 0], null, null, [47, 1], null, [47, 1], null], "DIU_Depuradores Daffodil International University": [null, [47, 1], null, [14, 0], null, null, [31, 0], null, [31, 0], null], "OR’1’=’1′;–– Amrita School of Engineering, Coimbatore": [[31, 0], null, null, [17, 0], null, null, [28, 0], null, [28, 0], null], "MIST_FrostByte Military Institute of Science and Technology": [[28, 0], [28, 0], null, [27, 0], null, null, [62, 1], null, [62, 1], null], "SignBiT National University of Computer and Emerging Sciences": [null, [62, 1], null, [74, 0], null, null, [74, 0], null, null, null], "bitfocus Test Institute 1": [null, [74, 0], null, [74, 0], null, null, [74, 0], null, null, null]}')


counts = []
scores = []
for(var i = 0; i<problems.length; i++){
    counts.push(0)
}

cur_time = Date.now()/1000

var remaining
if (cur_time - start_time > 5 * 60 * 60) {
    remaining = "Finished"
}
else{
    elapsed_time = cur_time - start_time
    hours = Math.floor((5 * 60 * 60 - elapsed_time)/60/60)
    minutes = Math.floor((5 * 60 * 60 - elapsed_time)/60)  % 60
    seconds = Math.floor((5 * 60 * 60 - elapsed_time))  % 60
    remaining = `Remaining: ${pad(hours)}:${pad(minutes)}:${pad(seconds)}`
}

elapsed_time = (cur_time - start_time)/60

for(var team in results){
    var solve_count = 0
    var penalty = 0

    for(var i = 0; i<results[team].length; i++){
        if(results[team][i] !== null &&  results[team][i][0] > elapsed_time)
            results[team][i] = null

        if(results[team][i] !== null){
            solve_count += 1
            penalty += results[team][i][0] + 20 * results[team][i][1]
            counts[i]++
        }
    }

    scores.push([solve_count, penalty, team])
}

scores = scores.sort((a, b) => {
    if(a[0] == b[0])
        return a[1] - b[1]
    else
        return b[0] - a[0]
})


function pad(x){
    y = x.toString()
    if (y.length < 2)
        return '0' + y
    else
        return y
}

function update(){
    document.querySelector('.h3').innerText = remaining

    table = document.querySelector('.table-standings')

    problem_row = table.children.item(0).children.item(0)
    problems.forEach((x) => {
        problem_row.innerHTML += `<th style="width: 24px;"><a href="">${x}</a></th>`
    })

    count_row = table.children.item(0).children.item(1)
    counts.forEach((x) => {
        count_row.innerHTML += `<th class="text-center">${x}</th>`
    })

    ranks = table.children.item(1)

    content = ''
    for(var i = 0 ; i<scores.length; i++){
        row_head = `<td>${i+1}</td><td><a href="">${scores[i][2]}</td><td><a href=""><div class="label label-info">${scores[i][0]}</div><div class="label label-default">${scores[i][1]}</div></a><td style="width: 24px;"></td></td>`
        row_tail = ''
        team = scores[i][2]

        for(var j = 0; j<results[team].length; j++){
            if(results[team][j] === null){
                row_tail += `<td><a href=""></a></td>`
            }
            else{
                row_tail += `<td><a href=""><div class="label label-success">&nbsp;</div><div class="label label-default">${results[team][j][1]+1} (${results[team][j][0]})</div></a></td>`
            }
        }

        content += `<tr data-id="undefined">${row_head}${row_tail}</tr>`
    }

    ranks.innerHTML += content
}
